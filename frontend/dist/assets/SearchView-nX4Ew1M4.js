import{u as M}from"./index-ClTo44m5.js";/* empty css               *//* empty css                 */import{r as f,B as R,H as u,I as i,J as a,U as _,Z as r,S as n,u as t,M as l,ac as K,X as x,Y as k,ae as S,R as z,W as V}from"./vue-BsGzy4bG.js";import{u as P}from"./vue-router-DQ646c9T.js";import{u as U}from"./noteStore-GpHaBAYh.js";import{d as j,f as q}from"./helpers-JRUdvybd.js";import{M as h,l as L,n as T}from"./element-plus-icons-DT1t6uiv.js";import{f as $,b as A,u as F,j as H}from"./element-plus-Bsbl4o2M.js";import"./pinia-Daj9vj9Q.js";const J={class:"container mx-auto px-3 sm:px-4 py-8 md:py-12 max-w-5xl"},W={class:"w-full"},X={class:"mb-8 sm:mb-10"},Y={key:0,class:"space-y-6"},Z=["onClick"],G={class:"p-6"},O={class:"flex flex-wrap gap-2 mb-4"},Q={class:"flex justify-between items-center text-xs opacity-70"},tt={class:"flex items-center space-x-2"},et={key:1,class:"text-center py-16"},st={key:2,class:"text-center py-16"},pt={__name:"SearchView",setup(at){const N=P(),B=U(),{isDarkMode:e}=M(),c=f(""),m=f([]),g=f(!1),v=f(!1),y=async()=>{if(c.value.trim()){g.value=!0,v.value=!0;try{const d=await B.searchNotes(c.value);m.value=d}catch(d){console.error("搜索失败:",d),m.value=[]}finally{g.value=!1}}},C=j(()=>{c.value.trim()?y():(m.value=[],v.value=!1)},500),E=d=>{d&&N.push(`/notes/${d}`)};return R(()=>{const s=new URLSearchParams(window.location.search).get("q");s&&(c.value=s,y())}),(d,s)=>{const p=A,I=$,D=F,w=H;return i(),u("div",{class:l(["min-h-screen transition-colors duration-300",{"bg-gray-50":!t(e),"bg-gray-950":t(e)}])},[a("div",J,[a("div",W,[s[7]||(s[7]=a("h1",{class:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-8 sm:mb-10 text-center"},"搜索笔记",-1)),a("div",X,[r(D,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),placeholder:"输入关键词搜索笔记...",size:"large",onKeyup:K(y,["enter"]),onInput:t(C),class:l(["rounded-xl shadow-md w-full",{"bg-white border-gray-200":!t(e),"bg-gray-800 border-gray-700":t(e)}])},{prefix:n(()=>[r(p,{class:"text-gray-500 dark:text-gray-400"},{default:n(()=>[r(t(h))]),_:1})]),append:n(()=>[r(I,{onClick:y,loading:g.value,class:"bg-gradient-to-r from-blue-500 to-purple-500 border-0 hover:shadow-lg transition-all"},{default:n(()=>[s[1]||(s[1]=a("span",{class:"hidden sm:inline"},"搜索",-1)),r(p,{class:"sm:hidden",size:"18"},{default:n(()=>[r(t(h))]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue","onInput","class"])]),m.value.length>0?(i(),u("div",Y,[a("div",{class:l(["text-sm font-medium opacity-80 transition-colors mb-6",{"text-gray-600":!t(e),"text-gray-400":t(e)}])}," 找到 "+x(m.value.length)+" 条结果 ",3),(i(!0),u(k,null,S(m.value,o=>(i(),u("div",{key:o.id,class:l(["rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer overflow-hidden",{"bg-white":!t(e),"bg-gray-800":t(e)}]),onClick:b=>E(o.id)},[a("div",G,[a("h3",{class:l(["text-xl font-bold mb-3 transition-colors",{"text-gray-800":!t(e),"text-white":t(e)}])},x(o.title),3),a("p",{class:l(["text-sm opacity-80 mb-5 line-clamp-3 transition-colors",{"text-gray-600":!t(e),"text-gray-400":t(e)}])},x(o.summary),3),a("div",O,[(i(!0),u(k,null,S(o.tags||[],b=>(i(),z(w,{key:b,size:"small",effect:"plain",class:l(["rounded-full text-xs",{"bg-gray-100 text-gray-700":!t(e),"bg-gray-700 text-gray-300":t(e)}])},{default:n(()=>[V(x(b),1)]),_:2},1032,["class"]))),128)),!o.tags||o.tags.length===0?(i(),z(w,{key:0,size:"small",effect:"plain",class:l(["rounded-full text-xs",{"bg-gray-100 text-gray-700":!t(e),"bg-gray-700 text-gray-300":t(e)}])},{default:n(()=>[...s[2]||(s[2]=[V(" 无标签 ",-1)])]),_:1},8,["class"])):_("",!0)]),a("div",Q,[a("span",{class:l(["transition-colors",{"text-gray-500":!t(e),"text-gray-400":t(e)}])},x(t(q)(o.updatedAt)),3),a("div",tt,[r(p,{size:"14",class:l(["transition-colors",{"text-gray-500":!t(e),"text-gray-400":t(e)}])},{default:n(()=>[r(t(T))]),_:1},8,["class"]),a("span",{class:l(["transition-colors",{"text-gray-500":!t(e),"text-gray-400":t(e)}])},"更新",2)])])]),s[3]||(s[3]=a("div",{class:"h-1 bg-gradient-to-r from-blue-500 to-purple-500"},null,-1))],10,Z))),128))])):v.value&&!g.value?(i(),u("div",et,[r(p,{size:"64",class:"text-gray-400 mb-4"},{default:n(()=>[r(t(h))]),_:1}),s[4]||(s[4]=a("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"没有找到相关笔记",-1)),s[5]||(s[5]=a("p",{class:"text-gray-500 dark:text-gray-500 text-sm mt-2"},"尝试使用其他关键词或检查拼写",-1))])):_("",!0),g.value?(i(),u("div",st,[r(p,{size:"40",class:"text-blue-500 dark:text-blue-400 animate-spin mb-4"},{default:n(()=>[r(t(L))]),_:1}),s[6]||(s[6]=a("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"搜索中...",-1))])):_("",!0)])])],2)}}};export{pt as default};
